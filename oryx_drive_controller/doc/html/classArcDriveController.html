<title>oryx_drive_controller: ArcDriveController Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">ArcDriveController Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="ArcDriveController" -->
<p>Low level velocity-arc based drive controller.  
 <a href="classArcDriveController.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ArcDriveController_8h_source.html">ArcDriveController.h</a>&gt;</code></p>

<p><a href="classArcDriveController-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArcDriveController.html#a5ed280bc0ffafb777477dae528b5ed58">ArcDriveController</a> (std::string drive_velocity_topic, std::string drive_swerve_topic, std::string drive_capabilities_topic, std::string ctrl_velocity_topic, std::string ctrl_translate_topic, double <a class="el" href="classArcDriveController.html#ae3cc88a078fac6bd0bd6198762b44354">baseLength</a>, double <a class="el" href="classArcDriveController.html#a599fca33f759977c81c62daed4f6e537">baseWidth</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArcDriveController.html#adc2d0fe281eece9e0b071e6a1554992d">drive</a> (double velocity, double radius)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells the controller to perform a velocity controlled arc-driving motion.  <a href="#adc2d0fe281eece9e0b071e6a1554992d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArcDriveController.html#aca4afd251caeb5e2dfbe499948fb5056">setCanSwerve</a> (bool <a class="el" href="classArcDriveController.html#a23b2e8e947dbd775ff34012cbeffc01f">canSwerve</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArcDriveController.html#a37424ba5e253cd001ade285de2dfc216">translate</a> (double xVelocity, double yVelocity)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells the controller to perform a velocity controlled translate motion.  <a href="#a37424ba5e253cd001ade285de2dfc216"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArcDriveController.html#a642793d9050d5a2c2f3e10489df62bf6">~ArcDriveController</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Default destructor.  <a href="#a642793d9050d5a2c2f3e10489df62bf6"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArcDriveController.html#a177f7ae54742868fcd742a9e5e8b7aec">calculateSwerveTankSteer</a> (double velocity, double radius, std::vector&lt; double &gt; &amp;result)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the wheel velocities used for swerve-based tank steering.  <a href="#a177f7ae54742868fcd742a9e5e8b7aec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArcDriveController.html#a6b00f0726bfc96ecbf4e7a758f6d301a">calculateSwerveTranslate</a> (double xVelocity, double yVelocity, std::vector&lt; double &gt; &amp;result)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the wheel velocities and swerve positions to translate.  <a href="#a6b00f0726bfc96ecbf4e7a758f6d301a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArcDriveController.html#ab33638f5e6a72c514b0faab6887ff2d6">calculateTankSteer</a> (double velocity, double radius, std::vector&lt; double &gt; &amp;result)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Subscriber to the intra-process VelocityTranslate message.  <a href="#ab33638f5e6a72c514b0faab6887ff2d6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArcDriveController.html#a3844cbafee415d0d950feb47c476d5b9">checkCapabilities</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArcDriveController.html#adcc52f5f1d08e8f78f488385f6d699be">processIPTransCB</a> (const oryx_drive_controller::VelocityTranslateConstPtr &amp;msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArcDriveController.html#ad2e3b10af8f3c79d02215af2114eb846">processIPVelCB</a> (const oryx_drive_controller::VelocityArcConstPtr &amp;msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArcDriveController.html#aed58b914802f794c57dda926567cfd64">sendMessages</a> (std::vector&lt; double &gt; &amp;wheelData)</td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArcDriveController.html#ae3cc88a078fac6bd0bd6198762b44354">baseLength</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag for signaling if swerve control is possible.  <a href="#ae3cc88a078fac6bd0bd6198762b44354"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArcDriveController.html#a599fca33f759977c81c62daed4f6e537">baseWidth</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The length of the platform.  <a href="#a599fca33f759977c81c62daed4f6e537"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArcDriveController.html#a23b2e8e947dbd775ff34012cbeffc01f">canSwerve</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ros::NodeHandle&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArcDriveController.html#a0086f1a6d783b716daab87a6f7270d44">nh</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The width of the platform.  <a href="#a0086f1a6d783b716daab87a6f7270d44"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ros::Publisher&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArcDriveController.html#a23049313df77e357a8e14420465af58a">swerve_pub</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Publisher for sending velocity messages to DriveManager.  <a href="#a23049313df77e357a8e14420465af58a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ros::Subscriber&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArcDriveController.html#a0e67bc82f4d513fcda0f498118efaec2">tans_sub</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Subscriber to the intra-process VelocityArc message.  <a href="#a0e67bc82f4d513fcda0f498118efaec2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ros::Subscriber&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArcDriveController.html#a5f31e30c6cad5e6878ceb70ba2601a8a">vel_sub</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Publisher for sending swerve message to DriveManager.  <a href="#a5f31e30c6cad5e6878ceb70ba2601a8a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ros::Publisher&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArcDriveController.html#a5b3c421ea43ef3a27933462805f9e835">velocity_pub</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Node handle into the ROS system.  <a href="#a5b3c421ea43ef3a27933462805f9e835"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Low level velocity-arc based drive controller. </p>
<p>Implements a velocity-control based controller which is capable of performing arc based motions. There are separate control modes for operation based on the capabilities of the base platform: *Without Swerve Capabilities -Standard Tank Steer Velocity-Arc *With Swerve Capabilities -Smooth Velocity-Arc -Translation </p>

<p>Definition at line <a class="el" href="ArcDriveController_8h_source.html#l00027">27</a> of file <a class="el" href="ArcDriveController_8h_source.html">ArcDriveController.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a5ed280bc0ffafb777477dae528b5ed58"></a><!-- doxytag: member="ArcDriveController::ArcDriveController" ref="a5ed280bc0ffafb777477dae528b5ed58" args="(std::string drive_velocity_topic, std::string drive_swerve_topic, std::string drive_capabilities_topic, std::string ctrl_velocity_topic, std::string ctrl_translate_topic, double baseLength, double baseWidth)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classArcDriveController.html#a5ed280bc0ffafb777477dae528b5ed58">ArcDriveController::ArcDriveController</a> </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>drive_velocity_topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>drive_swerve_topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>drive_capabilities_topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>ctrl_velocity_topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>ctrl_translate_topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>baseLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>baseWidth</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates a new <a class="el" href="classArcDriveController.html" title="Low level velocity-arc based drive controller.">ArcDriveController</a> with standard initialization parameters </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">drive_velocity_topic</td><td>The topic name to publish wheel velocity messages to </td></tr>
    <tr><td class="paramname">drive_swerve_topic</td><td>The topic name to publish swerve position messages to </td></tr>
    <tr><td class="paramname">drive_capabilities_topic</td><td>The topic name to poll for DriveManager capabilities </td></tr>
    <tr><td class="paramname">ctrl_velocity_topic</td><td>String representing the intra-processes topic name to communicate velocity-arc with the controller </td></tr>
    <tr><td class="paramname">ctrl_translate_topic</td><td>String representing the intra-processes topic name to communicate velocity-translate with the controller </td></tr>
    <tr><td class="paramname">baseLength</td><td>The length of the base platform from front wheel center to rear wheel center </td></tr>
    <tr><td class="paramname">baseWidth</td><td>The width of the base platform from left wheel center to right wheel center </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ArcDriveController_8cpp_source.html#l00024">24</a> of file <a class="el" href="ArcDriveController_8cpp_source.html">ArcDriveController.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a642793d9050d5a2c2f3e10489df62bf6"></a><!-- doxytag: member="ArcDriveController::~ArcDriveController" ref="a642793d9050d5a2c2f3e10489df62bf6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classArcDriveController.html#a642793d9050d5a2c2f3e10489df62bf6">ArcDriveController::~ArcDriveController</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Default destructor. </p>

<p>Definition at line <a class="el" href="ArcDriveController_8cpp_source.html#l00053">53</a> of file <a class="el" href="ArcDriveController_8cpp_source.html">ArcDriveController.cpp</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a177f7ae54742868fcd742a9e5e8b7aec"></a><!-- doxytag: member="ArcDriveController::calculateSwerveTankSteer" ref="a177f7ae54742868fcd742a9e5e8b7aec" args="(double velocity, double radius, std::vector&lt; double &gt; &amp;result)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classArcDriveController.html#a177f7ae54742868fcd742a9e5e8b7aec">ArcDriveController::calculateSwerveTankSteer</a> </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>velocity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculates the wheel velocities used for swerve-based tank steering. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">velocity</td><td></td></tr>
    <tr><td class="paramname">radius</td><td></td></tr>
    <tr><td class="paramname">result</td><td>Reference to a vector to write the result to, which will be front-left, front-right, rear-left, rear-right wheel velocities in that order.</td></tr>
  </table>
  </dd>
</dl>
<p>Calculates wheel speeds and swerve positions based on the following formulae: </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ R_si = R_c - W_m \]" src="form_4.png"/>
</p>
 <p class="formulaDsp">
<img class="formulaDsp" alt="\[ R_so = R_c + W_m \]" src="form_5.png"/>
</p>
 <p class="formulaDsp">
<img class="formulaDsp" alt="\[ R+wi = \sqrt{L_m ^2 + R_si ^2} \]" src="form_6.png"/>
</p>
 <p class="formulaDsp">
<img class="formulaDsp" alt="\[ R+wo = \sqrt{L_m ^2 + R_so ^2} \]" src="form_7.png"/>
</p>
 <p class="formulaDsp">
<img class="formulaDsp" alt="\[ theta_i = \arctan 2(L_m,R_si) \]" src="form_8.png"/>
</p>
 <p class="formulaDsp">
<img class="formulaDsp" alt="\[ theta_o = \arctan 2(L_m,R_so) \]" src="form_9.png"/>
</p>
 <p class="formulaDsp">
<img class="formulaDsp" alt="\[ V_wi = V_c \times \frac{R_wi}{R_c} \]" src="form_10.png"/>
</p>
 <p class="formulaDsp">
<img class="formulaDsp" alt="\[ V_wo = V_c \times \frac{R_wo}{R_c} \]" src="form_11.png"/>
</p>
<p>Where <img class="formulaInl" alt="$ V_wi $" src="form_12.png"/> is the linear velocity of the inside wheels, <img class="formulaInl" alt="$ V_wi $" src="form_12.png"/> is the linear velocity of the inside wheels, <img class="formulaInl" alt="$ \plusminus theta_i $" src="form_13.png"/> is the swerve position of the inside wheels, and <img class="formulaInl" alt="$ \plusminus theta_o $" src="form_14.png"/> is the swerve position of the outside wheels </p>

<p>Definition at line <a class="el" href="ArcDriveController_8cpp_source.html#l00190">190</a> of file <a class="el" href="ArcDriveController_8cpp_source.html">ArcDriveController.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a6b00f0726bfc96ecbf4e7a758f6d301a"></a><!-- doxytag: member="ArcDriveController::calculateSwerveTranslate" ref="a6b00f0726bfc96ecbf4e7a758f6d301a" args="(double xVelocity, double yVelocity, std::vector&lt; double &gt; &amp;result)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classArcDriveController.html#a6b00f0726bfc96ecbf4e7a758f6d301a">ArcDriveController::calculateSwerveTranslate</a> </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>xVelocity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>yVelocity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculates the wheel velocities and swerve positions to translate. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">xVelocity</td><td>X Velocity to maintain during the translate </td></tr>
    <tr><td class="paramname">yVelocity</td><td>Y Velocity to maintain during the translate </td></tr>
    <tr><td class="paramname">result</td><td>Reference to a vector to write the result to, which will be front-left, front-right, rear-left, rear-right wheel velocities in that order.</td></tr>
  </table>
  </dd>
</dl>
<p>Calculates the swerve positions and wheel velocities for the base platform using the following equations: </p>

<p>Definition at line <a class="el" href="ArcDriveController_8cpp_source.html#l00271">271</a> of file <a class="el" href="ArcDriveController_8cpp_source.html">ArcDriveController.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab33638f5e6a72c514b0faab6887ff2d6"></a><!-- doxytag: member="ArcDriveController::calculateTankSteer" ref="ab33638f5e6a72c514b0faab6887ff2d6" args="(double velocity, double radius, std::vector&lt; double &gt; &amp;result)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classArcDriveController.html#ab33638f5e6a72c514b0faab6887ff2d6">ArcDriveController::calculateTankSteer</a> </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>velocity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Subscriber to the intra-process VelocityTranslate message. </p>
<p>Calculates the wheel velocities used for standard, non-swerve tank steering </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">velocity</td><td>The linear velocity for traversing the arc </td></tr>
    <tr><td class="paramname">radius</td><td>The radius of the arc to traverse </td></tr>
    <tr><td class="paramname">result</td><td>Reference to a vector to write the result to, which will be front-left, front-right, rear-left, rear-right wheel velocities in that order.</td></tr>
  </table>
  </dd>
</dl>
<p>Calculates the wheel velocities for all four wheels assuming standard tank-steering math model. Uses the following equations: </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ V_l = \frac{(R \times V_c)-(M \times V_c)}{R} \]" src="form_0.png"/>
</p>
 <p class="formulaDsp">
<img class="formulaDsp" alt="\[ V_r = \frac{(R \times V_c)+(M \times V_c)}{R} \]" src="form_1.png"/>
</p>
<p>Where <img class="formulaInl" alt="$ V_l $" src="form_2.png"/> is the linear velocity of the left-side wheels, and <img class="formulaInl" alt="$ V_r $" src="form_3.png"/> is the linear velocity of the right-side wheels </p>

<p>Definition at line <a class="el" href="ArcDriveController_8cpp_source.html#l00130">130</a> of file <a class="el" href="ArcDriveController_8cpp_source.html">ArcDriveController.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a3844cbafee415d0d950feb47c476d5b9"></a><!-- doxytag: member="ArcDriveController::checkCapabilities" ref="a3844cbafee415d0d950feb47c476d5b9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classArcDriveController.html#a3844cbafee415d0d950feb47c476d5b9">ArcDriveController::checkCapabilities</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializaiton function which checks if the platform can swerve </p>

<p>Definition at line <a class="el" href="ArcDriveController_8cpp_source.html#l00061">61</a> of file <a class="el" href="ArcDriveController_8cpp_source.html">ArcDriveController.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="adc2d0fe281eece9e0b071e6a1554992d"></a><!-- doxytag: member="ArcDriveController::drive" ref="adc2d0fe281eece9e0b071e6a1554992d" args="(double velocity, double radius)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classArcDriveController.html#adc2d0fe281eece9e0b071e6a1554992d">ArcDriveController::drive</a> </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>velocity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>radius</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tells the controller to perform a velocity controlled arc-driving motion. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">velocity</td><td>Linear velocity to maintain </td></tr>
    <tr><td class="paramname">radius</td><td>Radius of the arc to traverse (float.MAX will result in a straight line) Note that the controller assumes that right-handed radii are positive. It also assumes that the robot frame is aligned such that the +X axis is in the center-forward position.</td></tr>
  </table>
  </dd>
</dl>
<p>Tells the base platform to drive along a given arc with a given tangential velocity. The platform will turn using swerve automatically if swerve is supported. </p>

<p>Definition at line <a class="el" href="ArcDriveController_8cpp_source.html#l00070">70</a> of file <a class="el" href="ArcDriveController_8cpp_source.html">ArcDriveController.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="adcc52f5f1d08e8f78f488385f6d699be"></a><!-- doxytag: member="ArcDriveController::processIPTransCB" ref="adcc52f5f1d08e8f78f488385f6d699be" args="(const oryx_drive_controller::VelocityTranslateConstPtr &amp;msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classArcDriveController.html#adcc52f5f1d08e8f78f488385f6d699be">ArcDriveController::processIPTransCB</a> </td>
          <td>(</td>
          <td class="paramtype">const oryx_drive_controller::VelocityTranslateConstPtr &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Callback for processing the intra-process VelocityTranslate messages </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>VelocityTranslate message received</td></tr>
  </table>
  </dd>
</dl>
<p>Passes the message variables to the translate method for processing </p>

<p>Definition at line <a class="el" href="ArcDriveController_8cpp_source.html#l00301">301</a> of file <a class="el" href="ArcDriveController_8cpp_source.html">ArcDriveController.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ad2e3b10af8f3c79d02215af2114eb846"></a><!-- doxytag: member="ArcDriveController::processIPVelCB" ref="ad2e3b10af8f3c79d02215af2114eb846" args="(const oryx_drive_controller::VelocityArcConstPtr &amp;msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classArcDriveController.html#ad2e3b10af8f3c79d02215af2114eb846">ArcDriveController::processIPVelCB</a> </td>
          <td>(</td>
          <td class="paramtype">const oryx_drive_controller::VelocityArcConstPtr &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Callback for processing the intra-process VelocityArc messages </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>VelocityArc message received</td></tr>
  </table>
  </dd>
</dl>
<p>Passes the message variables to the drive method for processing </p>

<p>Definition at line <a class="el" href="ArcDriveController_8cpp_source.html#l00294">294</a> of file <a class="el" href="ArcDriveController_8cpp_source.html">ArcDriveController.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aed58b914802f794c57dda926567cfd64"></a><!-- doxytag: member="ArcDriveController::sendMessages" ref="aed58b914802f794c57dda926567cfd64" args="(std::vector&lt; double &gt; &amp;wheelData)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classArcDriveController.html#aed58b914802f794c57dda926567cfd64">ArcDriveController::sendMessages</a> </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>wheelData</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sends the wheel data to the DriveManager </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">wheelData</td><td>vector containg wheel velocities and swerve positions</td></tr>
  </table>
  </dd>
</dl>
<p>Performs the actual work of publishing WheelVelocites and SwervePositions messages to DriveManager </p>

<p>Definition at line <a class="el" href="ArcDriveController_8cpp_source.html#l00101">101</a> of file <a class="el" href="ArcDriveController_8cpp_source.html">ArcDriveController.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aca4afd251caeb5e2dfbe499948fb5056"></a><!-- doxytag: member="ArcDriveController::setCanSwerve" ref="aca4afd251caeb5e2dfbe499948fb5056" args="(bool canSwerve)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classArcDriveController.html#aca4afd251caeb5e2dfbe499948fb5056">ArcDriveController::setCanSwerve</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>canSwerve</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Tells the controller whether the platform is swerve capable or not </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">canSwerve</td><td>TRUE for swerve, else FALSE </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ArcDriveController_8cpp_source.html#l00057">57</a> of file <a class="el" href="ArcDriveController_8cpp_source.html">ArcDriveController.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a37424ba5e253cd001ade285de2dfc216"></a><!-- doxytag: member="ArcDriveController::translate" ref="a37424ba5e253cd001ade285de2dfc216" args="(double xVelocity, double yVelocity)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classArcDriveController.html#a37424ba5e253cd001ade285de2dfc216">ArcDriveController::translate</a> </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>xVelocity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>yVelocity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tells the controller to perform a velocity controlled translate motion. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">xVelocity</td><td>The X velocity to maintain (relative to robot) </td></tr>
    <tr><td class="paramname">xVelocity</td><td>The Y velocity to maintain (relative to robot) Note that the controller assumes that right-handed radii are positive. It also assumes that the robot frame is aligned such that the +X axis is in the center-forward position.</td></tr>
  </table>
  </dd>
</dl>
<p>Tells the base platform to perform a linear translation motion along a given x/y velocity vector. Will fail if swerve is not supported by the base platform. </p>

<p>Definition at line <a class="el" href="ArcDriveController_8cpp_source.html#l00087">87</a> of file <a class="el" href="ArcDriveController_8cpp_source.html">ArcDriveController.cpp</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ae3cc88a078fac6bd0bd6198762b44354"></a><!-- doxytag: member="ArcDriveController::baseLength" ref="ae3cc88a078fac6bd0bd6198762b44354" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classArcDriveController.html#ae3cc88a078fac6bd0bd6198762b44354">ArcDriveController::baseLength</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Flag for signaling if swerve control is possible. </p>

<p>Definition at line <a class="el" href="ArcDriveController_8h_source.html#l00075">75</a> of file <a class="el" href="ArcDriveController_8h_source.html">ArcDriveController.h</a>.</p>

</div>
</div>
<a class="anchor" id="a599fca33f759977c81c62daed4f6e537"></a><!-- doxytag: member="ArcDriveController::baseWidth" ref="a599fca33f759977c81c62daed4f6e537" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classArcDriveController.html#a599fca33f759977c81c62daed4f6e537">ArcDriveController::baseWidth</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The length of the platform. </p>

<p>Definition at line <a class="el" href="ArcDriveController_8h_source.html#l00076">76</a> of file <a class="el" href="ArcDriveController_8h_source.html">ArcDriveController.h</a>.</p>

</div>
</div>
<a class="anchor" id="a23b2e8e947dbd775ff34012cbeffc01f"></a><!-- doxytag: member="ArcDriveController::canSwerve" ref="a23b2e8e947dbd775ff34012cbeffc01f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classArcDriveController.html#a23b2e8e947dbd775ff34012cbeffc01f">ArcDriveController::canSwerve</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ArcDriveController_8h_source.html#l00074">74</a> of file <a class="el" href="ArcDriveController_8h_source.html">ArcDriveController.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0086f1a6d783b716daab87a6f7270d44"></a><!-- doxytag: member="ArcDriveController::nh" ref="a0086f1a6d783b716daab87a6f7270d44" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ros::NodeHandle <a class="el" href="classArcDriveController.html#a0086f1a6d783b716daab87a6f7270d44">ArcDriveController::nh</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The width of the platform. </p>

<p>Definition at line <a class="el" href="ArcDriveController_8h_source.html#l00077">77</a> of file <a class="el" href="ArcDriveController_8h_source.html">ArcDriveController.h</a>.</p>

</div>
</div>
<a class="anchor" id="a23049313df77e357a8e14420465af58a"></a><!-- doxytag: member="ArcDriveController::swerve_pub" ref="a23049313df77e357a8e14420465af58a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ros::Publisher <a class="el" href="classArcDriveController.html#a23049313df77e357a8e14420465af58a">ArcDriveController::swerve_pub</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Publisher for sending velocity messages to DriveManager. </p>

<p>Definition at line <a class="el" href="ArcDriveController_8h_source.html#l00079">79</a> of file <a class="el" href="ArcDriveController_8h_source.html">ArcDriveController.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0e67bc82f4d513fcda0f498118efaec2"></a><!-- doxytag: member="ArcDriveController::tans_sub" ref="a0e67bc82f4d513fcda0f498118efaec2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ros::Subscriber <a class="el" href="classArcDriveController.html#a0e67bc82f4d513fcda0f498118efaec2">ArcDriveController::tans_sub</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Subscriber to the intra-process VelocityArc message. </p>

<p>Definition at line <a class="el" href="ArcDriveController_8h_source.html#l00081">81</a> of file <a class="el" href="ArcDriveController_8h_source.html">ArcDriveController.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5f31e30c6cad5e6878ceb70ba2601a8a"></a><!-- doxytag: member="ArcDriveController::vel_sub" ref="a5f31e30c6cad5e6878ceb70ba2601a8a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ros::Subscriber <a class="el" href="classArcDriveController.html#a5f31e30c6cad5e6878ceb70ba2601a8a">ArcDriveController::vel_sub</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Publisher for sending swerve message to DriveManager. </p>

<p>Definition at line <a class="el" href="ArcDriveController_8h_source.html#l00080">80</a> of file <a class="el" href="ArcDriveController_8h_source.html">ArcDriveController.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5b3c421ea43ef3a27933462805f9e835"></a><!-- doxytag: member="ArcDriveController::velocity_pub" ref="a5b3c421ea43ef3a27933462805f9e835" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ros::Publisher <a class="el" href="classArcDriveController.html#a5b3c421ea43ef3a27933462805f9e835">ArcDriveController::velocity_pub</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Node handle into the ROS system. </p>

<p>Definition at line <a class="el" href="ArcDriveController_8h_source.html#l00078">78</a> of file <a class="el" href="ArcDriveController_8h_source.html">ArcDriveController.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="ArcDriveController_8h_source.html">ArcDriveController.h</a></li>
<li><a class="el" href="ArcDriveController_8cpp_source.html">ArcDriveController.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


<br clear="all" />
<hr size="1"><div style="align: right;">
<a href="http://ros.org/wiki/oryx_drive_controller">oryx_drive_controller</a><br />
Author(s): </br />
<small>autogenerated on Sun Jan 27 2013 20:34:16</small>
</div>
</body>
</html>
